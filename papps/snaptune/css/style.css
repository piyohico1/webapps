:root {
    /* Colors - Premium Dark Theme */
    --bg-app: #0f1115;
    --bg-panel: #181b21;
    --bg-header: #181b21;
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --accent-primary: #6366f1;
    /* Indigo */
    --accent-hover: #4f46e5;
    --border-color: #2d313a;
    --input-bg: #232730;

    /* Spacing & Layout */
    --header-height: 60px;
    --sidebar-width: 300px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --radius-sm: 6px;
    --radius-md: 12px;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-app);
    color: var(--text-primary);
    height: 100vh;
    overflow: hidden;
}

/* App Container */
.app-container {
    display: grid;
    grid-template-areas:
        "header header"
        "main sidebar";
    grid-template-columns: 1fr var(--sidebar-width);
    grid-template-rows: var(--header-height) 1fr;
    height: 100vh;
}

/* Header */
.main-header {
    grid-area: header;
    background-color: var(--bg-header);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--spacing-lg);
    z-index: 10;
}

.logo-text {
    font-family: 'Inter', sans-serif;
    /* Setup Inter explicitly if not inherited well or use a wider font if needed */
    letter-spacing: 2px;
    color: var(--text-primary);
    display: flex;
    align-items: center;
}

.logo-text.large {
    font-size: 3rem;
    justify-content: center;
    margin-bottom: var(--spacing-lg);
}

.main-header .logo-text {
    font-size: 1.5rem;
}

.logo-bold {
    font-weight: 800;
}

.logo-light {
    font-weight: 300;
}

.header-controls {
    display: flex;
    gap: var(--spacing-md);
}

/* Main Workspace (Canvas) */
.main-workspace {
    grid-area: main;
    background-color: var(--bg-app);
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    /* Dot pattern background */
    background-image: radial-gradient(var(--border-color) 1px, transparent 1px);
    background-size: 20px 20px;
}

.initial-state {
    text-align: center;
    max-width: 600px;
    padding: var(--spacing-lg);
    background: rgba(24, 27, 33, 0.8);
    backdrop-filter: blur(10px);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.initial-state.hidden {
    display: none;
}

.welcome-content p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: var(--spacing-lg);
}

.feature-list {
    list-style: none;
    text-align: left;
    margin-bottom: var(--spacing-lg);
    display: inline-block;
}

.feature-list li {
    margin-bottom: 8px;
    color: var(--text-primary);
}

.large-btn {
    padding: 12px 32px;
    font-size: 1.1rem;
}

.canvas-container {
    position: relative;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    max-width: 100%;
    max-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

.canvas-container.hidden {
    display: none;
}

canvas {
    display: block;
    /* Use JS transform for scaling, so no CSS constraints on the element itself */
    max-width: none;
    max-height: none;
    transform-origin: center center;
}

/* Sidebar Controls */
.sidebar-controls {
    grid-area: sidebar;
    background-color: var(--bg-panel);
    border-left: 1px solid var(--border-color);
    padding: var(--spacing-lg);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.control-group h3 {
    font-size: 0.85rem;
    text-transform: uppercase;
    color: var(--text-secondary);
    letter-spacing: 1px;
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
    padding-bottom: var(--spacing-sm);
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: var(--radius-sm);
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9rem;
}

.primary-btn {
    background-color: var(--accent-primary);
    color: white;
}

.primary-btn:hover {
    background-color: var(--accent-hover);
    transform: translateY(-1px);
}

.secondary-btn {
    background-color: var(--border-color);
    color: var(--text-primary);
}

.secondary-btn:hover {
    background-color: #3b404b;
}

.secondary-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.icon-btn {
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    width: 40px;
    height: 40px;
    border-radius: var(--radius-sm);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
}

.icon-btn:hover {
    background: var(--border-color);
}

.text-btn {
    background: none;
    color: var(--accent-primary);
    padding: 4px;
    width: auto;
    font-size: 0.8rem;
}

.text-btn:hover {
    text-decoration: underline;
}

.full-width {
    width: 100%;
}

/* Sliders */
.slider-control {
    margin-bottom: var(--spacing-md);
}

.slider-control label {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    margin-bottom: var(--spacing-sm);
    color: var(--text-secondary);
}

input[type=range] {
    width: 100%;
    -webkit-appearance: none;
    background: transparent;
}

input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: var(--accent-primary);
    cursor: pointer;
    margin-top: -6px;
    box-shadow: 0 0 0 2px var(--bg-panel);
}

input[type=range]::-webkit-slider-runnable-track {
    width: 100%;
    height: 4px;
    background: var(--border-color);
    border-radius: 2px;
}

/* Grids */
.button-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-sm);
}

.aspect-ratio-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.aspect-btn {
    padding: 8px;
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s;
}

.aspect-btn.active,
.aspect-btn:hover {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

/* Zoom Controls */
.zoom-controls {
    position: absolute;
    bottom: var(--spacing-lg);
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-panel);
    padding: var(--spacing-sm);
    border-radius: var(--radius-md);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    z-index: 100;
}

.zoom-controls span {
    font-size: 0.9rem;
    font-weight: 500;
    min-width: 50px;
    text-align: center;
}

/* Crop Overlay */
.crop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    border: 2px solid white;
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    /* Dim outside */
    cursor: move;
}

.crop-overlay.hidden {
    display: none;
}

.crop-handle {
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    position: absolute;
}

.nw {
    top: -5px;
    left: -5px;
    cursor: nw-resize;
}

.ne {
    top: -5px;
    right: -5px;
    cursor: ne-resize;
}

.sw {
    bottom: -5px;
    left: -5px;
    cursor: sw-resize;
}

.se {
    bottom: -5px;
    right: -5px;
    cursor: se-resize;
}

/* Responsive */
@media (max-width: 768px) {
    .app-container {
        grid-template-areas:
            "header"
            "main"
            "sidebar";
        grid-template-columns: 1fr;
        grid-template-rows: var(--header-height) 45vh 1fr;
    }

    .sidebar-controls {
        border-left: none;
        border-top: 1px solid var(--border-color);
    }
}

/* Sidebar Footer */
.sidebar-footer {
    margin-top: auto;
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    text-align: center;
}

.copyright-link {
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 1.2rem;
    /* Increased size, but 1.6rem might be too big for sidebar, trying 1.2rem first which is 1.5x, user asked for double so let's go with 1.4rem which is huge or maybe they meant double the copyright specific size? small was likely 0.8em of 0.8rem. Let's try 1.0rem (normal text) or slightly larger. User said "double". Previous was 0.8rem. Double is 1.6rem. That is likely very large. I will stick to 1.2rem first or maybe 1.0rem.
    Wait, user said "double". Let's try to interpret "double of small copyright".
    Previous: small inside 0.8rem div.
    Let's make it look prominent. 
    */
    font-size: 1.2rem;
    font-weight: bold;
    transition: color 0.2s;
    display: block;
}

.copyright-link:hover {
    color: var(--accent-primary);
}

/* Modal */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.modal-overlay:not(.hidden) {
    opacity: 1;
    pointer-events: auto;
}

.modal-content {
    background: var(--bg-panel);
    width: 90%;
    max-width: 500px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
    max-height: 80vh;
}

.modal-header {
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.modal-body {
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
}

.updates-list {
    list-style: none;
}

.updates-list li {
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-color);
}

.updates-list li:last-child {
    border-bottom: none;
}

.update-date {
    display: block;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.update-desc {
    display: block;
    color: var(--text-primary);
    line-height: 1.5;
    white-space: pre-wrap;
}