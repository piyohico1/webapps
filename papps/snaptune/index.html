<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MSTVN0KCF9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-MSTVN0KCF9');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNAPTUNE</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dropzone.css">
    <link rel="stylesheet" href="css/crop.css">
    <meta name="description" content="„Ç∑„É≥„Éó„É´„Å™ÁîªÂÉèÁ∑®ÈõÜ„Ç¢„Éó„É™">
</head>

<body>
    <div class="app-container">
        <header class="main-header">
            <div style="display: flex; align-items: center; gap: 12px;">
                <h1 class="logo-text"><span class="logo-bold">SNAP</span><span class="logo-light">TUNE</span></h1>
                <button id="lang-btn" class="btn text-btn"
                    style="font-weight: bold; font-size: 0.8rem; border: 1px solid var(--border-color); padding: 2px 8px; border-radius: 4px; height: 24px;">EN</button>
                <button id="updates-btn" class="btn text-btn"
                    style="font-size: 0.8rem; margin-left: 4px; padding: 2px 8px; height: 24px; display: flex; align-items: center; gap: 4px;">
                    <svg viewBox="0 0 24 24" width="14" height="14" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83">
                        </path>
                    </svg>
                    <span data-i18n="updates">Updates</span>
                </button>
            </div>
            <div class="header-controls">
                <button id="undo-btn" class="btn secondary-btn" disabled title="ÂÖÉ„Å´Êàª„Åô" data-i18n-title="undo">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                        <path d="M3 7v6h6"></path>
                        <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
                    </svg>
                    <span data-i18n="undo">Undo</span>
                </button>
                <button id="upload-btn" class="btn primary-btn">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <span data-i18n="selectImage">ÁîªÂÉè„ÇíÈÅ∏Êäû</span>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </button>
                <button id="copy-btn" class="btn secondary-btn" disabled title="„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                    </svg>
                    <span data-i18n="copy">„Ç≥„Éî„Éº</span>
                </button>
                <button id="download-btn" class="btn secondary-btn" disabled>
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    </svg>
                    <span data-i18n="save">‰øùÂ≠ò</span>
                </button>
                <button id="share-btn" class="btn secondary-btn" title="X„Åß„Ç∑„Çß„Ç¢" data-i18n-title="share">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <main class="main-workspace">
            <div id="drop-zone" class="drop-zone hidden">
                <div class="drop-message">
                    <svg viewBox="0 0 24 24" width="64" height="64" stroke="currentColor" stroke-width="3" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p style="font-size: 1.5rem; margin-top: 16px;" data-i18n="dropText">„Åì„Åì„Å´ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó„Åó„Å¶ÈñãÂßã</p>
                </div>
            </div>

            <div id="initial-state" class="initial-state">
                <div class="welcome-content">
                    <h2 class="logo-text large"><span class="logo-bold">SNAP</span><span class="logo-light">TUNE</span>
                    </h2>
                    <p data-i18n="appDesc">„Ç∑„É≥„Éó„É´„Å™ÁîªÂÉèÁ∑®ÈõÜ„Ç¢„Éó„É™„ÄÇ<br>ÁîªÂÉè„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó„ÄÅ„Åæ„Åü„ÅØ„Ç≥„Éî„Éö„ÄÇ</p>
                    <ul class="feature-list">
                        <li data-i18n="featFilter">‚ú® Á∞°Êòì„Éï„Ç£„É´„Çø„Éº (Êòé„Çã„Åï„ÉªÂΩ©Â∫¶„Å™„Å©)</li>
                        <li data-i18n="featTransform">üîÑ ÂõûËª¢„ÉªÂèçËª¢„Éª„Éà„É™„Éü„É≥„Ç∞</li>
                        <li data-i18n="featPrivacy">üîí „Éó„É©„Ç§„Éê„Ç∑„Éº‰øùË≠∑ (ÁîªÂÉè„ÅØ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åï„Çå„Åæ„Åõ„Çì)</li>
                    </ul>
                    <div style="margin-top: 0;">
                        <button id="hero-upload-btn" class="btn primary-btn large-btn">
                            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2"
                                fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            ÁîªÂÉè„ÇíÈÅ∏Êäû
                        </button>
                    </div>
                </div>
            </div>

            <div class="canvas-container hidden" id="canvas-container">
                <canvas id="editor-canvas"></canvas>

                <div id="crop-overlay" class="crop-overlay hidden">
                    <div class="crop-handle nw"></div>
                    <div class="crop-handle ne"></div>
                    <div class="crop-handle sw"></div>
                    <div class="crop-handle se"></div>
                </div>
                <!-- Blur overlay for drag-to-blur mode -->
                <div id="blur-overlay" class="blur-overlay hidden"></div>
            </div>

            <div class="zoom-controls">
                <button id="zoom-out" class="icon-btn" title="Á∏ÆÂ∞è">-</button>
                <span id="zoom-level">100%</span>
                <button id="zoom-in" class="icon-btn" title="Êã°Â§ß">+</button>
                <button id="fit-screen" class="icon-btn" title="ÁîªÈù¢„Å´Âêà„Çè„Åõ„Çã">Fit</button>
            </div>
        </main>

        <aside class="sidebar-controls">
            <div class="control-group">
                <h3 data-i18n="filters">„Éï„Ç£„É´„Çø„Éº</h3>
                <div class="slider-control">
                    <label><span data-i18n="brightness">Êòé„Çã„Åï</span> <span id="brightness-val">100%</span></label>
                    <input type="range" id="brightness" min="0" max="200" value="100">
                </div>
                <div class="slider-control">
                    <label><span data-i18n="contrast">„Ç≥„É≥„Éà„É©„Çπ„Éà</span> <span id="contrast-val">100%</span></label>
                    <input type="range" id="contrast" min="0" max="200" value="100">
                </div>
                <div class="slider-control">
                    <label><span data-i18n="saturation">ÂΩ©Â∫¶</span> <span id="saturation-val">100%</span></label>
                    <input type="range" id="saturation" min="0" max="200" value="100">
                </div>
                <div class="slider-control">
                    <label><span data-i18n="grayscale">„Ç∞„É¨„Éº„Çπ„Ç±„Éº„É´</span> <span id="grayscale-val">0%</span></label>
                    <input type="range" id="grayscale" min="0" max="100" value="0">
                </div>
                <div class="slider-control">
                    <label><span data-i18n="sepia">„Çª„Éî„Ç¢</span> <span id="sepia-val">0%</span></label>
                    <input type="range" id="sepia" min="0" max="100" value="0">
                </div>
                <button id="reset-filters" class="btn text-btn" data-i18n="resetFilters">„Éï„Ç£„É´„Çø„Éº„Éª„É™„Çª„ÉÉ„Éà</button>
            </div>

            <div class="control-group">
                <h3 data-i18n="transform">Â§âÂΩ¢</h3>
                <div class="button-grid">
                    <button id="rotate-left" class="icon-btn" title="Â∑¶ÂõûËª¢" data-i18n-title="rotateLeft">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                            <path d="M3 3v5h5"></path>
                        </svg>
                    </button>
                    <button id="rotate-right" class="icon-btn" title="Âè≥ÂõûËª¢" data-i18n-title="rotateRight">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12a9 9 0 1 1-9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                        </svg>
                    </button>
                    <button id="flip-h" class="icon-btn" title="Â∑¶Âè≥ÂèçËª¢" data-i18n-title="flipH">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="17 22 21 12 17 2"></polyline>
                            <polyline points="1 22 5 12 1 2"></polyline>
                            <line x1="11" y1="2" x2="11" y2="22" stroke-dasharray="4 2"></line>
                        </svg>
                    </button>
                    <button id="flip-v" class="icon-btn" title="‰∏ä‰∏ãÂèçËª¢" data-i18n-title="flipV">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="22 17 12 21 2 17"></polyline>
                            <polyline points="22 1 12 5 2 1"></polyline>
                            <line x1="2" y1="11" x2="22" y2="11" stroke-dasharray="4 2"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="control-group">
                <h3 data-i18n="crop">„Éà„É™„Éü„É≥„Ç∞ („Ç¢„Çπ„Éö„ÇØ„ÉàÊØî)</h3>
                <div class="orientation-controls" style="margin-bottom: 8px;">
                    <button id="orient-landscape" class="btn aspect-btn active" title="Ê®™ (Landscape)"
                        data-i18n-title="landscape">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2"
                            fill="none">
                            <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                        </svg>
                        <span data-i18n="landscape">Ê®™</span>
                    </button>
                    <button id="orient-portrait" class="btn aspect-btn" title="Á∏¶ (Portrait)" data-i18n-title="portrait">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2"
                            fill="none">
                            <rect x="5" y="2" width="14" height="20" rx="2"></rect>
                        </svg>
                        <span data-i18n="portrait">Á∏¶</span>
                    </button>
                </div>
                <div class="aspect-ratio-grid">
                    <button class="aspect-btn active" data-ratio="free" data-i18n="free">Free</button>
                    <button class="aspect-btn" data-ratio="1:1">1:1</button>
                    <button class="aspect-btn" data-ratio="4:3">4:3</button>
                    <button class="aspect-btn" data-ratio="16:9">16:9</button>
                    <button class="aspect-btn" data-ratio="9:19.6">9:19.6</button>
                    <button class="aspect-btn" data-ratio="3:1">3:1</button>
                </div>
                <button id="apply-crop" class="btn primary-btn full-width" data-i18n="applyCrop">Âàá„ÇäÊäú„ÅçÈÅ©Áî®</button>
            </div>

            <div class="control-group">
                <h3 data-i18n="blurArea">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éª„Åº„Åã„Åó</h3>
                <button id="apply-blur" class="btn secondary-btn full-width" data-i18n="applyBlur">ÈÅ∏ÊäûÁØÑÂõ≤„Çí„Åº„Åã„Åô</button>
            </div>

            <div class="sidebar-footer">
                <a href="https://piyohico1.github.io/webapps/" target="_blank" rel="noopener noreferrer"
                    class="copyright-link">&copy; piyohico apps</a>
            </div>
        </aside>
    </div>

    <!-- Update History Modal -->
    <div id="updates-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="updatesTitle">„Ç¢„ÉÉ„Éó„Éá„Éº„ÉàÂ±•Ê≠¥</h3>
                <button id="close-modal" class="btn icon-btn"
                    style="width: 32px; height: 32px; border: none; background: transparent;">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <ul id="updates-list" class="updates-list">
                    <!-- Javascript will populate this -->
                </ul>
            </div>
        </div>
    </div>

    <script src="js/imageProcessor.js"></script>
    <script src="js/cropManager.js"></script>
    <script src="js/app.js"></script>
</body>

</html>