<!DOCTYPE html>
<html lang="ja">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 16 16%22><text x=%220%22 y=%2214%22 font-size=%2216%22>&#x1f414;</text></svg>" type="image/svg+xml">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MSTVN0KCF9"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MSTVN0KCF9');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 67vw;
            min-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #e8f6f3 0%, #a7d8d0 30%, #7fb3d3 70%, #5dade2 100%);
            min-height: 100vh;
            color: #2c3e50;
        }
        
        @media (max-width: 1200px) {
            body {
                max-width: 90vw;
                min-width: auto;
            }
        }
        
        @media (max-width: 768px) {
            body {
                max-width: 95vw;
                padding: 15px;
            }
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(45, 156, 140, 0.15), 0 8px 30px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #2d9c8c;
            margin-bottom: 40px;
            font-size: 2.8em;
            font-weight: 700;
            background: linear-gradient(45deg, #2d9c8c, #16a085, #27ae60);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 15px rgba(45, 156, 140, 0.3);
            letter-spacing: -0.5px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }
        
        input, select {
            padding: 14px;
            border: 2px solid rgba(45, 156, 140, 0.2);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #16a085;
            box-shadow: 0 0 0 4px rgba(22, 160, 133, 0.1);
            background: white;
        }
        
        .emoji-input {
            font-size: 32px;
            text-align: center;
            height: 80px;
        }
        
        .color-group {
            display: flex;
            gap: 10px;
            align-items: end;
        }
        
        .color-group input[type="color"] {
            width: 60px;
            height: 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .generate-btn {
            background: linear-gradient(45deg, #16a085, #27ae60);
            color: white;
            padding: 16px 28px;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
            white-space: nowrap;
            box-shadow: 0 6px 20px rgba(22, 160, 133, 0.3);
            letter-spacing: 0.5px;
        }
        
        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(22, 160, 133, 0.4);
            background: linear-gradient(45deg, #1abc9c, #2ecc71);
        }
        
        .preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            max-width: 100%;
            overflow-x: auto;
        }
        
        .preview-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.85);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(45, 156, 140, 0.1), 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
        }
        
        .preview-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(45, 156, 140, 0.15), 0 8px 25px rgba(0,0,0,0.08);
        }
        
        .preview-item h3 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 18px;
        }
        
        .preview-item canvas {
            border: 2px solid #ddd;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            image-rendering: crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
        }
        
        /* 64pxä»¥ä¸‹ã¯å®Ÿéš›ã®ã‚µã‚¤ã‚ºã§è¡¨ç¤º */
        .preview-item canvas[width="16"], 
        .preview-item canvas[width="32"],
        .preview-item canvas[width="48"],
        .preview-item canvas[width="64"] {
            width: auto;
            height: auto;
            cursor: pointer;
        }
        
        /* 128pxä»¥ä¸Šã¯ç¸®å°è¡¨ç¤º */
        .preview-item canvas[width="128"],
        .preview-item canvas[width="256"],
        .preview-item canvas[width="512"],
        .preview-item canvas[width="1024"] {
            max-width: 120px;
            max-height: 120px;
            width: auto;
            height: auto;
            cursor: pointer;
        }
        
        .download-btn {
            background: linear-gradient(45deg, #e67e22, #f39c12);
            color: white;
            padding: 12px 22px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
            letter-spacing: 0.3px;
        }
        
        .download-btn:hover {
            background: linear-gradient(45deg, #d35400, #e67e22);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.4);
        }
        
        .instructions {
            background: rgba(232, 246, 243, 0.8);
            border-radius: 20px;
            margin-top: 40px;
            border-left: 5px solid #16a085;
            box-shadow: 0 8px 25px rgba(22, 160, 133, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }
        
        .instructions-header {
            padding: 25px 30px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            user-select: none;
        }
        
        .instructions-header:hover {
            background: rgba(22, 160, 133, 0.05);
        }
        
        .instructions-header h3 {
            margin: 0;
            color: #16a085;
            font-size: 22px;
            font-weight: 700;
        }
        
        .instructions-toggle {
            font-size: 20px;
            color: #16a085;
            transition: transform 0.3s;
        }
        
        .instructions-toggle.open {
            transform: rotate(180deg);
        }
        
        .instructions-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            padding: 0 30px;
        }
        
        .instructions-content.open {
            max-height: 800px;
            padding: 0 30px 30px 30px;
        }
        
        .instructions ol {
            margin: 15px 0;
            padding-left: 25px;
        }
        
        .instructions li {
            margin: 8px 0;
            line-height: 1.6;
        }
        
        .emoji-suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
            gap: 8px;
            margin-top: 15px;
        }
        
        .emoji-btn {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(240, 240, 240, 0.8));
            border: 2px solid rgba(45, 156, 140, 0.2);
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 50px;
            min-width: 50px;
        }
        
        .emoji-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            background: linear-gradient(145deg, rgba(232, 246, 243, 0.9), rgba(220, 240, 235, 0.8));
            border-color: #16a085;
        }
        
        .source-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 15px;
        }
        
        .toggle-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e8f6f3;
            padding: 16px 32px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            color: #2c3e50;
        }
        
        .toggle-btn.active {
            background: linear-gradient(45deg, #16a085, #27ae60);
            color: white;
            border-color: #16a085;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(22, 160, 133, 0.3);
        }
        
        .toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: #16a085;
        }
        
        .upload-area {
            border: 3px dashed rgba(45, 156, 140, 0.3);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            background: rgba(232, 246, 243, 0.5);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .upload-area:hover {
            border-color: #16a085;
            background: rgba(232, 246, 243, 0.8);
            transform: translateY(-2px);
        }
        
        .upload-area.drag-over {
            border-color: #16a085;
            background: rgba(22, 160, 133, 0.1);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(22, 160, 133, 0.2);
        }
        
        .upload-area input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 10;
        }
        
        .upload-text p {
            margin: 8px 0;
            color: #666;
            font-size: 16px;
        }
        
        .upload-text p:first-child {
            font-weight: 600;
            color: #333;
            font-size: 18px;
        }
        
        .upload-area .image-preview {
            margin: 0;
            text-align: center;
            width: 100%;
        }
        
        .upload-area .image-preview img {
            max-width: 150px;
            max-height: 150px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            margin-bottom: 15px;
        }
        
        .upload-area .image-preview .remove-btn {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(255, 71, 87, 0.3);
            position: relative;
            z-index: 20;
        }
        
        .upload-area .image-preview .remove-btn:hover {
            background: linear-gradient(45deg, #ff3742, #ff2730);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }
        
        .size-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .size-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .size-checkbox:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
        
        .size-checkbox input[type="checkbox"] {
            margin: 0;
            transform: scale(1.2);
        }
        
        .feature-box {
            background: rgba(255, 248, 225, 0.9);
            padding: 25px;
            border-radius: 18px;
            margin-top: 25px;
            border: 2px solid rgba(241, 196, 15, 0.3);
            box-shadow: 0 6px 20px rgba(241, 196, 15, 0.15);
            backdrop-filter: blur(10px);
        }
        
        .feature-box h4 {
            margin-top: 0;
            color: #d68910;
            font-size: 18px;
            font-weight: 700;
        }
        
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .feature-list li {
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            list-style: none;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .gradient-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-top: 10px;
        }
        
        .gradient-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .gradient-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border-color: #667eea;
        }
        
        .gradient-btn:hover::after {
            content: attr(title);
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            pointer-events: none;
        }
        
        .gradient-btn:hover::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(0,0,0,0.8);
            z-index: 100;
            pointer-events: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.3s ease-out;
            max-height: 90vh;
            overflow: auto;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .modal-header h2 {
            margin: 0;
            color: #333;
            font-size: 24px;
        }
        
        .close {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .close:hover {
            background: linear-gradient(45deg, #ff3742, #ff2730);
            transform: scale(1.05);
        }
        
        .modal-body {
            text-align: center;
            padding: 20px 0;
        }
        
        .full-size-canvas {
            border: 3px solid #ddd;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            max-width: 100%;
            height: auto;
            image-rendering: crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
        }
        
        .size-info {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .gradient-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .modal-content {
                margin: 10% auto;
                padding: 20px;
                max-width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒç”Ÿæˆãƒ„ãƒ¼ãƒ«</h1>
        
        <div class="source-toggle">
            <button class="toggle-btn active" onclick="toggleSource('emoji')" id="emojiToggle">âœ¨ çµµæ–‡å­—ã‚’ä½¿ç”¨</button>
            <button class="toggle-btn" onclick="toggleSource('image')" id="imageToggle">ğŸ–¼ï¸ ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
        </div>
        
        <div class="controls">
            <div class="control-group" id="emojiControls">
                <label for="emoji">çµµæ–‡å­—ã‚’é¸æŠ:</label>
                <input type="text" id="emoji" class="emoji-input" value="ğŸ¨" maxlength="2">
                <div class="emoji-suggestions">
                    <button class="emoji-btn" onclick="setEmoji('ğŸ¨')">ğŸ¨</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸš€')">ğŸš€</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸ’¡')">ğŸ’¡</button>
                    <button class="emoji-btn" onclick="setEmoji('â­')">â­</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸ”¥')">ğŸ”¥</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸ’')">ğŸ’</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸŒŸ')">ğŸŒŸ</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸ¯')">ğŸ¯</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸ›¸')">ğŸ›¸</button>
                    <button class="emoji-btn" onclick="setEmoji('âš¡')">âš¡</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸª')">ğŸª</button>
                    <button class="emoji-btn" onclick="setEmoji('ğŸŒˆ')">ğŸŒˆ</button>
                </div>
            </div>
            
            <div class="control-group" id="imageControls" style="display: none;">
                <label for="imageUpload">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰:</label>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(event)">
                    <div class="upload-text" id="uploadText">
                        <p>ğŸ“ ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠ</p>
                        <p>ã¾ãŸã¯ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</p>
                        <p><strong>ğŸ“‹ Ctrl+V ã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰è²¼ã‚Šä»˜ã‘</strong></p>
                        <p style="font-size: 14px; color: #888;">å¯¾å¿œå½¢å¼: PNG, JPG, GIF, WebP ãªã©</p>
                    </div>
                    <div class="image-preview" id="imagePreview" style="display: none;"></div>
                </div>
            </div>
            
            <div class="control-group">
                <label for="bgStyle">èƒŒæ™¯ã‚¹ã‚¿ã‚¤ãƒ«:</label>
                <select id="bgStyle" onchange="updateColorInputs()">
                    <option value="solid">å˜è‰²</option>
                    <option value="gradient">ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</option>
                    <option value="transparent">é€æ˜</option>
                </select>
                
                <div id="colorControls" style="margin-top: 15px;">
                    <label>èƒŒæ™¯è‰²:</label>
                    <div class="color-group">
                        <div>
                            <input type="color" id="bgColor1" value="#4a90e2">
                            <label for="bgColor1" style="font-size: 12px; margin: 5px 0 0 0;">ãƒ¡ã‚¤ãƒ³</label>
                        </div>
                        <div id="color2Group" style="display: none;">
                            <input type="color" id="bgColor2" value="#764ba2">
                            <label for="bgColor2" style="font-size: 12px; margin: 5px 0 0 0;">ã‚µãƒ–</label>
                        </div>
                    </div>
                    <div class="gradient-suggestions" id="gradientSuggestions" style="display: none;">
                        <label style="font-size: 12px; margin-bottom: 8px;">ãŠã™ã™ã‚ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:</label>
                        <div class="gradient-grid">
                            <button class="gradient-btn" onclick="setGradient('#4a90e2', '#764ba2')" style="background: linear-gradient(45deg, #4a90e2, #764ba2);" title="ãƒ–ãƒ«ãƒ¼"></button>
                            <button class="gradient-btn" onclick="setGradient('#ff6b6b', '#ffa726')" style="background: linear-gradient(45deg, #ff6b6b, #ffa726);" title="ã‚µãƒ³ã‚»ãƒƒãƒˆ"></button>
                            <button class="gradient-btn" onclick="setGradient('#4caf50', '#81c784')" style="background: linear-gradient(45deg, #4caf50, #81c784);" title="ã‚°ãƒªãƒ¼ãƒ³"></button>
                            <button class="gradient-btn" onclick="setGradient('#9c27b0', '#e1bee7')" style="background: linear-gradient(45deg, #9c27b0, #e1bee7);" title="ãƒ‘ãƒ¼ãƒ—ãƒ«"></button>
                            <button class="gradient-btn" onclick="setGradient('#2196f3', '#00bcd4')" style="background: linear-gradient(45deg, #2196f3, #00bcd4);" title="ã‚ªãƒ¼ã‚·ãƒ£ãƒ³"></button>
                            <button class="gradient-btn" onclick="setGradient('#ff5722', '#ff9800')" style="background: linear-gradient(45deg, #ff5722, #ff9800);" title="ã‚ªãƒ¬ãƒ³ã‚¸"></button>
                            <button class="gradient-btn" onclick="setGradient('#e91e63', '#f8bbd9')" style="background: linear-gradient(45deg, #e91e63, #f8bbd9);" title="ãƒ”ãƒ³ã‚¯"></button>
                            <button class="gradient-btn" onclick="setGradient('#424242', '#757575')" style="background: linear-gradient(45deg, #424242, #757575);" title="ã‚°ãƒ¬ãƒ¼"></button>
                            <button class="gradient-btn" onclick="setGradient('#673ab7', '#3f51b5')" style="background: linear-gradient(45deg, #673ab7, #3f51b5);" title="ã‚¤ãƒ³ãƒ‡ã‚£ã‚´"></button>
                            <button class="gradient-btn" onclick="setGradient('#009688', '#4db6ac')" style="background: linear-gradient(45deg, #009688, #4db6ac);" title="ãƒ†ã‚£ãƒ¼ãƒ«"></button>
                            <button class="gradient-btn" onclick="setGradient('#ff9800', '#ffb74d')" style="background: linear-gradient(45deg, #ff9800, #ffb74d);" title="ã‚¢ãƒ³ãƒãƒ¼"></button>
                            <button class="gradient-btn" onclick="setGradient('#607d8b', '#90a4ae')" style="background: linear-gradient(45deg, #607d8b, #90a4ae);" title="ãƒ–ãƒ«ãƒ¼ã‚°ãƒ¬ãƒ¼"></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="control-group" id="imageSettings" style="display: none;">
                <label for="imageSize">ç”»åƒè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰:</label>
                <select id="imageSize">
                    <option value="contain">å…¨ä½“ã‚’è¡¨ç¤ºï¼ˆä½™ç™½ã‚ã‚Šï¼‰</option>
                    <option value="cover">ç”»åƒã‚’æ‹¡å¤§ã—ã¦ãƒ•ã‚£ãƒƒãƒˆ</option>
                    <option value="fill">ç”»åƒã‚’ä¼¸ç¸®ã—ã¦ãƒ•ã‚£ãƒƒãƒˆ</option>
                </select>
            </div>
        </div>
        
        <div class="control-group">
            <label>ç”Ÿæˆã™ã‚‹ã‚µã‚¤ã‚º:</label>
            <div class="size-grid">
                <label class="size-checkbox">
                    <input type="checkbox" id="size16" checked>
                    <span>16Ã—16px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size32" checked>
                    <span>32Ã—32px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size48" checked>
                    <span>48Ã—48px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size64" checked>
                    <span>64Ã—64px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size128" checked>
                    <span>128Ã—128px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size256" checked>
                    <span>256Ã—256px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size512">
                    <span>512Ã—512px</span>
                </label>
                <label class="size-checkbox">
                    <input type="checkbox" id="size1024">
                    <span>1024Ã—1024px</span>
                </label>
            </div>
        </div>
        
        <div style="text-align: center; margin: 30px 0;">
            <button class="generate-btn" onclick="generateIcons()">ğŸ¨ ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆ</button>
            <button class="generate-btn" onclick="downloadAllIcons()" style="background: linear-gradient(45deg, #28a745, #20c997);">ğŸ“ å€‹åˆ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            <button class="generate-btn" onclick="downloadAllAsZip()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24);">ğŸ“¦ ZIPã§ä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
        </div>
        
        <div class="preview" id="preview"></div>
        
        <!-- å®Ÿè§£åƒåº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="fullSizeModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">å®Ÿè§£åƒåº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
                    <button class="close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="size-info" id="modalSizeInfo"></div>
                    <canvas id="modalCanvas" class="full-size-canvas"></canvas>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <div class="instructions-header" onclick="toggleInstructions()">
                <h3>ğŸ“‹ ä½¿ç”¨æ–¹æ³•</h3>
                <span class="instructions-toggle">â–¼</span>
            </div>
            <div class="instructions-content" id="instructionsContent">
                <ol>
                    <li><strong>ã‚½ãƒ¼ã‚¹ã‚’é¸æŠ:</strong> çµµæ–‡å­—ã¾ãŸã¯ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</li>
                    <li><strong>çµµæ–‡å­—ã®å ´åˆ:</strong> ãŠå¥½ã¿ã®çµµæ–‡å­—ã‚’é¸æŠã¾ãŸã¯å…¥åŠ›ã—ã¦ãã ã•ã„</li>
                    <li><strong>ç”»åƒã®å ´åˆ:</strong> ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã€ã¾ãŸã¯Ctrl+Vã§è²¼ã‚Šä»˜ã‘ã—ã¦ãã ã•ã„</li>
                    <li><strong>èƒŒæ™¯ã‚’è¨­å®š:</strong> å˜è‰²ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€é€æ˜ã‹ã‚‰é¸æŠã—ã¦ãã ã•ã„</li>
                    <li><strong>ã‚µã‚¤ã‚ºã‚’é¸æŠ:</strong> å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„</li>
                    <li><strong>ç”Ÿæˆ:</strong> ã€Œã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</li>
                    <li><strong>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:</strong> å€‹åˆ¥ã¾ãŸã¯ZIPã§ä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™</li>
                </ol>
                
                <div class="feature-box">
                    <h4>ğŸ’¡ ä¸»ãªæ©Ÿèƒ½</h4>
                    <ul class="feature-list">
                        <li>ğŸ¨ è±Šå¯Œãªçµµæ–‡å­—ã‚µãƒ³ãƒ—ãƒ«</li>
                        <li>ğŸ–¼ï¸ ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾å¿œ</li>
                        <li>ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘</li>
                        <li>ğŸŒˆ ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯</li>
                        <li>ğŸ“ 8ã¤ã®ã‚µã‚¤ã‚ºå¯¾å¿œ</li>
                        <li>ğŸ“¦ ZIPä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li>
                        <li>ğŸ”„ ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</li>
                        <li>ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³</li>
                        <li>âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</li>
                    </ul>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 14px;">
                        <strong>ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘ã«ã¤ã„ã¦:</strong><br>
                        ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ãŸå¾Œã€ãƒšãƒ¼ã‚¸ä¸Šã§<strong>Ctrl+V</strong>ï¼ˆMac: Cmd+Vï¼‰ã‚’æŠ¼ã™ã¨ã€è‡ªå‹•çš„ã«ç”»åƒã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šç”»åƒãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚
                    </div>
                </div>
                
                <div style="background: rgba(232, 245, 233, 0.9); padding: 25px; border-radius: 18px; margin-top: 25px; border: 2px solid rgba(46, 204, 113, 0.3); box-shadow: 0 6px 20px rgba(46, 204, 113, 0.15); backdrop-filter: blur(10px);">
                    <h4 style="margin-top: 0; color: #27ae60; font-weight: 700;">ğŸ¯ ç”¨é€”ä¾‹</h4>
                    <ul style="margin: 10px 0;">
                        <li><strong>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ:</strong> ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã€ãƒ­ã‚´ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ã‚³ãƒ³</li>
                        <li><strong>ã‚¢ãƒ—ãƒª:</strong> ãƒ›ãƒ¼ãƒ ç”»é¢ã‚¢ã‚¤ã‚³ãƒ³ã€æ©Ÿèƒ½ã‚¢ã‚¤ã‚³ãƒ³</li>
                        <li><strong>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢:</strong> ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã€ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ã‚¤ã‚³ãƒ³</li>
                        <li><strong>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—:</strong> ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚¢ã‚¤ã‚³ãƒ³</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script>
        let uploadedImage = null;
        let currentSource = 'emoji';
        
        const iconSizes = [
            { id: 'size16', size: 16 },
            { id: 'size32', size: 32 },
            { id: 'size48', size: 48 },
            { id: 'size64', size: 64 },
            { id: 'size128', size: 128 },
            { id: 'size256', size: 256 },
            { id: 'size512', size: 512 },
            { id: 'size1024', size: 1024 }
        ];
        
        function toggleSource(source) {
            currentSource = source;
            const emojiToggle = document.getElementById('emojiToggle');
            const imageToggle = document.getElementById('imageToggle');
            const emojiControls = document.getElementById('emojiControls');
            const imageControls = document.getElementById('imageControls');
            const imageSettings = document.getElementById('imageSettings');
            
            if (source === 'emoji') {
                emojiToggle.classList.add('active');
                imageToggle.classList.remove('active');
                emojiControls.style.display = 'flex';
                imageControls.style.display = 'none';
                imageSettings.style.display = 'none';
            } else {
                emojiToggle.classList.remove('active');
                imageToggle.classList.add('active');
                emojiControls.style.display = 'none';
                imageControls.style.display = 'flex';
                imageSettings.style.display = 'flex';
            }
        }
        
        function updateColorInputs() {
            const bgStyle = document.getElementById('bgStyle').value;
            const colorControls = document.getElementById('colorControls');
            const color2Group = document.getElementById('color2Group');
            const gradientSuggestions = document.getElementById('gradientSuggestions');
            
            if (bgStyle === 'transparent') {
                colorControls.style.display = 'none';
            } else {
                colorControls.style.display = 'block';
                
                if (bgStyle === 'gradient') {
                    color2Group.style.display = 'block';
                    gradientSuggestions.style.display = 'block';
                } else {
                    color2Group.style.display = 'none';
                    gradientSuggestions.style.display = 'none';
                }
            }
        }
        
        function setGradient(color1, color2) {
            document.getElementById('bgColor1').value = color1;
            document.getElementById('bgColor2').value = color2;
        }
        
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                processImageFile(file);
            }
        }
        
        function processImageFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    uploadedImage = img;
                    showImagePreview(e.target.result);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        function handleClipboardPaste(event) {
            const items = event.clipboardData.items;
            
            for (let i = 0; i < items.length; i++) {
                const item = items[i];
                
                if (item.type.indexOf('image') !== -1) {
                    event.preventDefault();
                    const file = item.getAsFile();
                    if (file) {
                        // ç”»åƒã‚¿ãƒ–ã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
                        if (currentSource !== 'image') {
                            toggleSource('image');
                        }
                        processImageFile(file);
                    }
                    break;
                }
            }
        }
        
        function showImagePreview(src) {
            const uploadText = document.getElementById('uploadText');
            const preview = document.getElementById('imagePreview');
            
            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã‚’éè¡¨ç¤ºã«ã—ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
            uploadText.style.display = 'none';
            preview.style.display = 'block';
            preview.innerHTML = `
                <img src="${src}" alt="ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒ">
                <br>
                <button class="remove-btn" onclick="removeImage()">ğŸ—‘ï¸ ç”»åƒã‚’å‰Šé™¤</button>
            `;
        }
        
        function removeImage() {
            uploadedImage = null;
            const uploadText = document.getElementById('uploadText');
            const preview = document.getElementById('imagePreview');
            
            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’éè¡¨ç¤ºã«ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤º
            preview.style.display = 'none';
            preview.innerHTML = '';
            uploadText.style.display = 'block';
            document.getElementById('imageUpload').value = '';
        }
        
        function setupDragDrop() {
            const uploadArea = document.getElementById('uploadArea');
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type.startsWith('image/')) {
                        const input = document.getElementById('imageUpload');
                        input.files = files;
                        handleImageUpload({ target: input });
                    }
                }
            });
        }
        
        function setEmoji(emoji) {
            document.getElementById('emoji').value = emoji;
        }
        
        function generateIcons() {
            const bgStyle = document.getElementById('bgStyle').value;
            const bgColor1 = document.getElementById('bgColor1').value;
            const bgColor2 = document.getElementById('bgColor2').value;
            
            if (currentSource === 'emoji') {
                const emoji = document.getElementById('emoji').value;
                if (!emoji.trim()) {
                    alert('çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
            } else {
                if (!uploadedImage) {
                    alert('ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
                    return;
                }
            }
            
            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢
            const preview = document.getElementById('preview');
            preview.innerHTML = '';
            
            // é¸æŠã•ã‚ŒãŸã‚µã‚¤ã‚ºã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆ
            iconSizes.forEach(({ id, size }) => {
                const checkbox = document.getElementById(id);
                if (checkbox.checked) {
                    createIconPreview(size, bgColor1, bgColor2, bgStyle);
                }
            });
        }
        
        function createIconPreview(size, bgColor1, bgColor2, bgStyle) {
            const preview = document.getElementById('preview');
            
            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ
            const previewItem = document.createElement('div');
            previewItem.className = 'preview-item';
            previewItem.innerHTML = `
                <h3>${size}Ã—${size}px</h3>
                <div style="flex: 1; display: flex; align-items: center; justify-content: center; min-height: 150px;">
                    <canvas id="canvas${size}" width="${size}" height="${size}" style="display: block;" onclick="showFullSize(${size})" title="ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Ÿè§£åƒåº¦è¡¨ç¤º"></canvas>
                </div>
                <div>
                    <button class="download-btn" onclick="downloadIcon('canvas${size}', 'icon${size}.png')">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            `;
            
            preview.appendChild(previewItem);
            
            // ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆ
            const imageSize = document.getElementById('imageSize').value;
            
            if (currentSource === 'emoji') {
                const emoji = document.getElementById('emoji').value;
                generateIcon(`canvas${size}`, size, emoji, bgColor1, bgColor2, bgStyle, 'emoji');
            } else {
                generateIcon(`canvas${size}`, size, uploadedImage, bgColor1, bgColor2, bgStyle, 'image', imageSize);
            }
        }
        
        function generateIcon(canvasId, size, source, bgColor1, bgColor2, bgStyle, sourceType, imageSize = 'contain') {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢
            ctx.clearRect(0, 0, size, size);
            
            // èƒŒæ™¯ã‚’æç”»
            if (bgStyle === 'solid') {
                ctx.fillStyle = bgColor1;
                ctx.fillRect(0, 0, size, size);
            } else if (bgStyle === 'gradient') {
                const gradient = ctx.createLinearGradient(0, 0, size, size);
                gradient.addColorStop(0, bgColor1);
                gradient.addColorStop(1, bgColor2);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, size, size);
            }
            
            // å†…å®¹ã‚’æç”»
            if (sourceType === 'emoji') {
                // çµµæ–‡å­—ã‚’æç”»
                const fontSize = size * 0.65;
                ctx.font = `${fontSize}px "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = '#000';
                ctx.fillText(source, size / 2, size / 2);
            } else {
                // ç”»åƒã‚’æç”»
                drawImageWithFit(ctx, source, 0, 0, size, size, imageSize);
            }
        }
        
        function drawImageWithFit(ctx, img, x, y, width, height, fitMode) {
            const imgWidth = img.width;
            const imgHeight = img.height;
            const imgAspect = imgWidth / imgHeight;
            const canvasAspect = width / height;
            
            let drawWidth, drawHeight, drawX, drawY;
            
            if (fitMode === 'contain') {
                if (imgAspect > canvasAspect) {
                    drawWidth = width * 0.8;
                    drawHeight = (width * 0.8) / imgAspect;
                    drawX = x + (width - drawWidth) / 2;
                    drawY = y + (height - drawHeight) / 2;
                } else {
                    drawWidth = (height * 0.8) * imgAspect;
                    drawHeight = height * 0.8;
                    drawX = x + (width - drawWidth) / 2;
                    drawY = y + (height - drawHeight) / 2;
                }
            } else if (fitMode === 'cover') {
                if (imgAspect > canvasAspect) {
                    drawWidth = height * imgAspect;
                    drawHeight = height;
                    drawX = x + (width - drawWidth) / 2;
                    drawY = y;
                } else {
                    drawWidth = width;
                    drawHeight = width / imgAspect;
                    drawX = x;
                    drawY = y + (height - drawHeight) / 2;
                }
            } else {
                drawWidth = width;
                drawHeight = height;
                drawX = x;
                drawY = y;
            }
            
            ctx.drawImage(img, drawX, drawY, drawWidth, drawHeight);
        }
        
        function downloadAllIcons() {
            const canvases = document.querySelectorAll('.preview canvas');
            if (canvases.length === 0) {
                alert('ã¾ãšã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
                return;
            }
            
            canvases.forEach((canvas, index) => {
                setTimeout(() => {
                    const size = canvas.width;
                    downloadIcon(canvas.id, `icon${size}.png`);
                }, index * 200);
            });
            
            setTimeout(() => {
                alert(`${canvases.length}å€‹ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼`);
            }, canvases.length * 200 + 500);
        }
        
        function downloadAllAsZip() {
            const canvases = document.querySelectorAll('.preview canvas');
            if (canvases.length === 0) {
                alert('ã¾ãšã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
                return;
            }
            
            const zip = new JSZip();
            
            canvases.forEach(canvas => {
                const size = canvas.width;
                const dataUrl = canvas.toDataURL('image/png');
                const base64Data = dataUrl.split(',')[1];
                zip.file(`icon${size}.png`, base64Data, { base64: true });
            });
            
            // README.txtã‚’è¿½åŠ 
            const readmeContent = `ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ä½œæˆã•ã‚ŒãŸã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™

å«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:
${Array.from(canvases).map(canvas => `- icon${canvas.width}.png (${canvas.width}Ã—${canvas.width}px)`).join('\n')}

ä½¿ç”¨ç”¨é€”:
- ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ã‚³ãƒ³
- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ
- ãã®ä»–ã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ç´ æ

ç”Ÿæˆæ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}
ç”Ÿæˆãƒ„ãƒ¼ãƒ«: https://icon-generator.example.com`;
            
            zip.file('README.txt', readmeContent);
            
            zip.generateAsync({ type: 'blob' }).then(function(content) {
                saveAs(content, 'icons.zip');
            });
        }
        
        function downloadIcon(canvasId, filename) {
            const canvas = document.getElementById(canvasId);
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        function showFullSize(size) {
            const originalCanvas = document.getElementById(`canvas${size}`);
            const modal = document.getElementById('fullSizeModal');
            const modalCanvas = document.getElementById('modalCanvas');
            const modalTitle = document.getElementById('modalTitle');
            const modalSizeInfo = document.getElementById('modalSizeInfo');
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨æƒ…å ±ã‚’è¨­å®š
            modalTitle.textContent = `${size}Ã—${size}px - å®Ÿè§£åƒåº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼`;
            modalSizeInfo.innerHTML = `
                <strong>å®Ÿéš›ã®ã‚µã‚¤ã‚º:</strong> ${size}Ã—${size}ãƒ”ã‚¯ã‚»ãƒ«<br>
                <strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç›®å®‰:</strong> ${estimateFileSize(size)}<br>
                <strong>ç”¨é€”:</strong> ${getUsageInfo(size)}
            `;
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’è¨­å®š
            modalCanvas.width = size;
            modalCanvas.height = size;
            
            // å…ƒã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
            const modalCtx = modalCanvas.getContext('2d');
            modalCtx.clearRect(0, 0, size, size);
            modalCtx.drawImage(originalCanvas, 0, 0);
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            modal.style.display = 'block';
        }
        
        function closeModal() {
            const modal = document.getElementById('fullSizeModal');
            modal.style.display = 'none';
        }
        
        function estimateFileSize(size) {
            // PNG ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®å¤§ã¾ã‹ãªæ¨å®š
            const pixels = size * size;
            if (pixels <= 1024) return '1-2KB';
            if (pixels <= 4096) return '2-5KB';
            if (pixels <= 16384) return '5-15KB';
            if (pixels <= 65536) return '15-50KB';
            if (pixels <= 262144) return '50-150KB';
            return '150KBä»¥ä¸Š';
        }
        
        function getUsageInfo(size) {
            if (size <= 16) return 'ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã€ã‚¿ã‚¹ã‚¯ãƒãƒ¼';
            if (size <= 32) return 'ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã€å°ã•ãªãƒœã‚¿ãƒ³';
            if (size <= 48) return 'ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ã€ãƒ„ãƒ¼ãƒ«ãƒãƒ¼';
            if (size <= 64) return 'ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ã‚¤ã‚³ãƒ³ã€ãƒªã‚¹ãƒˆè¡¨ç¤º';
            if (size <= 128) return 'ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ã€å¤§ããªã‚¢ã‚¤ã‚³ãƒ³';
            if (size <= 256) return 'Mac Dockã€é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤';
            if (size <= 512) return 'ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ï¼ˆé«˜è§£åƒåº¦ï¼‰ã€å°åˆ·ç‰©';
            return 'Retina ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã€å°åˆ·ç‰©ã€æ‹¡å¤§è¡¨ç¤º';
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modal = document.getElementById('fullSizeModal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
        
        function toggleInstructions() {
            const content = document.getElementById('instructionsContent');
            const toggle = document.querySelector('.instructions-toggle');
            
            if (content.classList.contains('open')) {
                content.classList.remove('open');
                toggle.classList.remove('open');
            } else {
                content.classList.add('open');
                toggle.classList.add('open');
            }
        }
        
        // åˆæœŸåŒ–
        window.onload = function() {
            setupDragDrop();
            updateColorInputs();
            generateIcons();
            
            // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘æ©Ÿèƒ½ã‚’è¿½åŠ 
            document.addEventListener('paste', handleClipboardPaste);
            
            // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«tabindexã‚’è¨­å®š
            document.body.tabIndex = -1;
            document.body.focus();
        };
    </script>
</body>
</html>